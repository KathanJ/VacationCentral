{% extends 'base.html' %}

{% block title %}
    Profile
{% endblock %}

{% block content %}
    <div style="display: flex;">
        <div class="col mx-auto justify-content-center" style="flex: 1 1 30%;">
            <aside>
                <div class="card mb-4 mt-3 mx-3" data-bs-theme="dark" style="border-color: var(--primary-light); height: calc(94vh - 56px);">
                    <div class="card-body pt-0 px-0 pb-0 rounded" style="display: flex; flex-direction: column; background-color: var(--primary-dark);">
                        <div class="container mx-auto justify-content-center align-content-center rounded" style="flex: 1 1 45%; background: linear-gradient(var(--primary-orange) 50%, var(--primary-dark) 50%)">
                            <div class="container-fluid rounded-circle px-0 mt-5" style="width: 35%; border: 2px solid var(--primary-light);">
                                {% if user.profile_pic %}
                                    <img src="{{ url_for('static', path=user.profile_pic) }}" style="background-color: var(--secondary-dark); min-height: 100%; min-width: 100%; height: 8.25em; object-fit: contain;" class="img-fluid rounded-circle" alt="Profile Picture">
                                {% else %}
                                    <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" style="background-color: var(--secondary-dark); min-height: 100%; min-width: 100%; height: 8.25em; object-fit: contain;" class="img-fluid rounded-circle" alt="Profile Picture">
                                {% endif %}
                            </div>
                            <div class="container-fluid px-0 text-center mt-1">
                                <!-- <p class="card-text" style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-bold); color: var(--secondary-light); font-size: x-large; font-optical-sizing: auto;">{{ user.username }}</p> -->
                                {% if username|length > 50 %}
                                    <p class="card-text" style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-bold); color: var(--secondary-light); font-size: x-large; font-optical-sizing: auto;">{{ username[0:50] }}...</p>
                                {% else %}
                                    <p class="card-text" style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-bold); color: var(--secondary-light); font-size: x-large; font-optical-sizing: auto;">{{ username }}</p>
                                {% endif %}
                            </div>
                            <div class="container-fluid px-0 text-center">
                                {% if user.name|length > 50 %}
                                    <p class="card-text" style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-bold); color: var(--secondary-light); font-size: large; font-optical-sizing: auto;">{{ user.name[0:50] }}...</p>
                                {% else %}    
                                    <p class="card-text" style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-bold); color: var(--secondary-light); font-size: large; font-optical-sizing: auto;">{{ user.name }}</p>
                                {% endif %}
                            </div>
                        </div>
                        <div class="mx-auto justify-content-center align-items-center" style="flex: 1 1 45%; width: 100%; background-color: var(--extra-dark); border-top: 1px solid var(--primary-light); border-bottom: 1px solid var(--primary-light);">
                            <div class="card-body pt-0 px-0 pb-0 rounded" style="display: flex; flex-direction: column;">
                                <div class="mt-3 mx-auto" style="flex: 1 1 40%; width: 100%;">
                                    <div class="container-fluid px-3" style="display: flex;">
                                        <h6 class="card-text mb-0" style="flex: 1 1 95%; display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-medium); color: var(--secondary-light); font-size: large; font-optical-sizing: auto;">Bio:</h6>
                                        <a href="#" class="hlink-footer-custom mb-0 text-center" data-bs-toggle="modal" data-bs-target="#editprofilebiomodal" style="flex: 1 1 5%; display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-medium); color: var(--secondary-light); font-size: large; font-optical-sizing: auto;"><i class="bi bi-pencil-square"></i></a> 
                                    </div>
                                    <div class="container-fluid px-3 mt-1">
                                        {% if not user.bio %}
                                            <p class="card-text mb-0" style="flex: 1 1 95%; font-family: var(--primary-font-family); font-weight: var(--font-weight-bold); color: var(--primary-light); font-size: medium; font-optical-sizing: auto;">No bio provided.</p>
                                        {% else %}
                                            {% if user.bio|length > 70 %}
                                                <p class="card-text mb-0" style="flex: 1 1 95%; font-family: var(--primary-font-family); font-weight: var(--font-weight-bold); color: var(--primary-light); font-size: medium; font-optical-sizing: auto;">{{ user.bio[0:70] }}...</p>
                                            {% else %}
                                                <p class="card-text mb-0" style="flex: 1 1 95%; font-family: var(--primary-font-family); font-weight: var(--font-weight-bold); color: var(--primary-light); font-size: medium; font-optical-sizing: auto;">{{ user.bio }}</p>
                                            {% endif %}
                                        {% endif %}
                                    </div>

                                    <div class="modal fade" id="editprofilebiomodal" tabindex="-1" aria-labelledby="editprofilebiomodallabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                                        <div class="modal-dialog modal-lg modal-dialog-centered">
                                            <div class="modal-content"  style="border: 2px solid var(--primary-orange);">
                                                <div class="modal-header" style="border-bottom: 2px solid var(--primary-orange);">
                                                    <h1 class="modal-title fs-5" id="editprofilebiomodallabel" style="font-family: var(--secondary-font-family); font-weight: var(--font-weight-medium); color: var(--secondary-light);">Edit Bio</h1>
                                                    <button type="button" class="btn-close hlink-footer-custom" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                        <!-- <div class="container-fluid rounded-circle px-0 mb-0" style="width: 15%; border: 2px solid var(--primary-light);">
                                                            {% if user.profile_pic %}
                                                                <img src="{{ url_for('static', path=user.profile_pic) }}" style="background-color: var(--secondary-dark); min-height: 100%; min-width: 100%; object-fit: contain;" class="img-fluid rounded-circle" alt="Profile Picture">
                                                            {% else %}
                                                                <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" style="background-color: var(--secondary-dark); min-height: 100%; min-width: 100%; object-fit: contain;" class="img-fluid rounded-circle" alt="Profile Picture">
                                                            {% endif %}
                                                            <label for="profilepicinput" class="form-label mb-0" style="position: absolute; top: 100px; right: 340px; cursor: pointer;">
                                                                <i class="bi bi-pencil-square hlink-footer-custom text-center" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-medium); color: var(--secondary-light); font-size: x-large; font-optical-sizing: auto;"></i>
                                                            </label>
                                                        </div> -->
                                                    <form action="{{ url_for('get_profile', username=user.username, tab='posts') }}" method="GET" data-bs-theme="light" id="editbioform">
                                                        <!-- <input type="file" class="form-control form-input-custom mt-3 input-text-custom" id="profilepicinput" placeholder="Profile Pic" name="profilepic" style="height: 0 !important; width: 0 !important; opacity: 0% !important;"> -->
                                                        <div class="mb-3" style="display: flex;">
                                                            <textarea class="form-control form-input-custom input-text-custom" style="flex: 1 1 50%;" id="bioinput" rows="3" cols="3" placeholder="{{ user.bio }}" name="bio"></textarea>
                                                        </div>
                                                        <div class="container-fluid px-0 mt-4" style="display: flex;">
                                                            <!-- <button type="button" class="btn btn-orange-custom me-3" data-bs-dismiss="modal" style="flex: 1 1 50%; background-color: red !important;">Cancel</button> -->
                                                            <div class="container-fluid" style="opacity: 0%; flex: 1 1 30%;"></div>
                                                            <button type="submit" class="btn btn-orange-custom mx-5" style="flex: 1 1 40%;">Update</button>
                                                            <div class="container-fluid" style="opacity: 0%; flex: 1 1 30%;"></div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <hr class="mb-0 mx-3 mt-3" style="border: 2px solid; border-color: var(--primary-light);">
                                <div class="mt-3 mb-3 mx-auto" style="flex: 1 1 60%; width: 100%;">
                                    <div class="container-fluid px-3" style="display: grid; grid-auto-columns: minmax(0, 1fr); gap: 3em;">
                                        <div class="container-fluid" style="grid-row: 1; grid-column: 1;">
                                            {% if not user.posts %}
                                            <p class="card-text mb-0" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-bold); color: var(--primary-light); font-size: large; font-optical-sizing: auto;">0</p>
                                            {% else %}
                                            <p class="card-text mb-0" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-bold); color: var(--primary-light); font-size: large; font-optical-sizing: auto;">{{ user.posts|length }}</p>
                                            {% endif %}
                                            <h6 class="card-text mb-0" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-medium); color: var(--secondary-light); font-size: large; font-optical-sizing: auto;">Posts</h6>
                                        </div>
                                        <div class="container-fluid" style="grid-row: 1; grid-column: 2;">
                                            <p class="card-text mb-0" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-bold); color: var(--primary-light); font-size: large; font-optical-sizing: auto;">{{ user.birthdate }}</p>
                                            <h6 class="card-text mb-0" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-medium); color: var(--secondary-light); font-size: large; font-optical-sizing: auto;">B'day</h6>
                                        </div>
                                        <div class="container-fluid" style="grid-row: 2; grid-column: 1;">
                                            <p class="card-text mb-0" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-bold); color: var(--primary-light); font-size: large; font-optical-sizing: auto;">{{ user.points }}</p>
                                            <h6 class="card-text mb-0" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-medium); color: var(--secondary-light); font-size: large; font-optical-sizing: auto;">Points</h6>
                                        </div>
                                        <div class="container-fluid" style="grid-row: 2; grid-column: 2;">
                                            <p class="card-text mb-0" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-bold); color: var(--primary-light); font-size: large; font-optical-sizing: auto;">{{ user.addresses }}</p>
                                            <h6 class="card-text mb-0" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-medium); color: var(--secondary-light); font-size: large; font-optical-sizing: auto;">Location</h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mx-auto text-center align-content-center" style="flex: 1 1 10%; width: 100%;">
                            <button class="btn btn-orange-custom ms-4" data-bs-toggle="modal" data-bs-target="#editprofilemodal"><i class="bi bi-pencil-square"></i>&nbsp;&nbsp;Edit Profile</button>
                        </div>
                        <div class="modal fade" id="editprofilemodal" tabindex="-1" aria-labelledby="editprofilemodallabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                            <div class="modal-dialog modal-lg modal-dialog-centered">
                                <div class="modal-content"  style="border: 2px solid var(--primary-orange);">
                                    <div class="modal-header" style="border-bottom: 2px solid var(--primary-orange);">
                                        <h1 class="modal-title fs-5" id="editprofilemodallabel" style="font-family: var(--secondary-font-family); font-weight: var(--font-weight-medium); color: var(--secondary-light);">Edit Profile</h1>
                                        <button type="button" class="btn-close hlink-footer-custom" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                            <div class="container-fluid rounded-circle px-0 mb-0" style="width: 15%; border: 2px solid var(--primary-light); position: relative;">
                                                {% if user.profile_pic %}
                                                    <img src="{{ url_for('static', path=user.profile_pic) }}" style="background-color: var(--secondary-dark); min-height: 100%; min-width: 100%; height: 6.5em; object-fit: contain;" class="img-fluid rounded-circle" alt="Profile Picture">
                                                {% else %}
                                                    <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" style="background-color: var(--secondary-dark); min-height: 100%; min-width: 100%; height: 6.5em; object-fit: contain;" class="img-fluid rounded-circle" alt="Profile Picture">
                                                {% endif %}
                                                <label for="profilepicinput" class="form-label mb-0" style="position: absolute; top: 83px; right: 1px; cursor: pointer;">
                                                    <i class="bi bi-pencil-square hlink-footer-custom text-center" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-medium); color: var(--secondary-light); font-size: x-large; font-optical-sizing: auto;"></i>
                                                </label>
                                            </div>
                                        <form action="{{ url_for('update_user_stuff', username=user.username) }}" method="POST" data-bs-theme="light" id="editprofileform">
                                            <input type="file" class="form-control form-input-custom mt-3 input-text-custom" id="profilepicinput" placeholder="Profile Pic" name="profilepic" style="height: 0 !important; width: 0 !important; opacity: 0% !important;">
                                            <div class="mb-3" style="display: flex;">
                                                <input type="text" class="form-control form-input-custom me-3 input-text-custom" id="usernameinput" aria-describedby="usernameHelp" placeholder="Username" name="profusername" value="{{ username }}"> <!-- !!!!!!!!!! Change to user.username !!!!!!!!!!! -->
                                                <input type="text" class="form-control form-input-custom ms-3 input-text-custom" id="fullnameinput" aria-describedby="fullnameHelp" placeholder="Full Name" name="fullname" value="{{ user.full_name }}">
                                            </div>
                                            <div class="mb-3" style="display: flex;">
                                                <input type="email" class="form-control form-input-custom me-3 input-text-custom" id="emailidinput" aria-describedby="emailHelp" placeholder="Email ID" name="email" value="{{ user.email }}">

                                                <input type="number" class="form-control form-input-custom ms-3 input-text-custom" id="contactnoinput" placeholder="Contact No" name="contact"  value="{{ user.contact_no }}">
                                            </div>
                                            <div class="mb-3" style="display: flex;">
                                                <textarea class="form-control form-input-custom me-3 input-text-custom" style="flex: 1 1 50%;" id="addressinput" rows="3" cols="3" placeholder="{{ user.addresses }}" name="address" required></textarea>
                        
                                                <div class="ms-3" style="flex: 1 1 50%;">
                                                    <select class="form-control form-input-custom mb-3 input-text-custom" id="regioninput" name="region">
                                                        <option value="region" disabled>Region</option>
                                                        {% if user.region == 'North America' %}
                                                            <option value="north america" selected>North America</option>
                                                        {% else %}
                                                            <option value="north america">North America</option>
                                                        {% endif %}
                                                        {% if user.region == 'South America' %}
                                                            <option value="south america" selected>South America</option>
                                                        {% else %}
                                                            <option value="south america">South America</option>
                                                        {% endif %}
                                                        {% if user.region == 'Europe' %}
                                                            <option value="europe" selected>Europe</option>
                                                        {% else %}
                                                            <option value="europe">Europe</option>
                                                        {% endif %}
                                                        {% if user.region == 'asia' %}
                                                            <option value="asia" selected>Asia</option>
                                                        {% else %}
                                                            <option value="asia">Asia</option>
                                                        {% endif %}
                                                        {% if user.region == 'Africa' %}
                                                            <option value="africa" selected>Africa</option>
                                                        {% else %}
                                                            <option value="africa">Africa</option>
                                                        {% endif %}
                                                        {% if user.region == 'Australia' %}
                                                            <option value="australia" selected>Australia</option>
                                                        {% else %}
                                                            <option value="australia">Australia</option>
                                                        {% endif %}
                                                    </select>

                                                    <input type="file" class="form-control form-input-custom mt-3 input-text-custom" id="aadharcardinput" placeholder="Aadhar Card" name="aadharcard">
                                                </div>
                                            </div>
                                            <div class="mb-3" style="display: flex;">
                                                <input type="date" class="form-control form-input-custom me-3 input-text-custom" id="dobinput" placeholder="Date of Birth" name="dob" value="{{ user.dob }}">
                        
                                                <select class="form-control form-input-custom ms-3 input-text-custom" id="sexinput" name="sex" style="height: min-content">
                                                    <option value="gender" disabled>Gender</option>
                                                    {% if user.gender == 'Male' %}
                                                        <option value="male" selected>Male</option>
                                                    {% else %}
                                                        <option value="male">Male</option>
                                                    {% endif %}
                                                    {% if user.gender == 'Female' %}
                                                        <option value="female" selected>Female</option>
                                                    {% else %}
                                                        <option value="female">Female</option>
                                                    {% endif %}
                                                    {% if user.gender == 'Other' %}
                                                        <option value="other" selected>Other</option>
                                                    {% else %}
                                                        <option value="other">Other</option>
                                                    {% endif %}
                                                    {% if user.gender == 'Unspecified' %}
                                                        <option value="unspecified" selected>Rather Not Say</option>
                                                    {% else %}
                                                        <option value="unspecified">Rather Not Say</option>
                                                    {% endif %}
                                                </select>
                                            </div>
                                            <div class="mb-3" style="display: flex;">
                                                <input type="password" class="form-control form-input-custom me-3 input-text-custom" id="passwordinput" placeholder="Password" name="password">
                                                <input type="password" class="form-control form-input-custom ms-3 input-text-custom" id="confirmpasswordinput" placeholder="Confirm Password" name="confirmpassword">
                                            </div>
                                            <div class="container-fluid px-0 mt-4" style="display: flex;">
                                                <!-- <button type="button" class="btn btn-orange-custom me-3" data-bs-dismiss="modal" style="flex: 1 1 50%; background-color: red !important;">Cancel</button> -->
                                                <div class="container-fluid" style="opacity: 0%; flex: 1 1 25%;"></div>
                                                <button type="submit" class="btn btn-orange-custom mx-5" style="flex: 1 1 50%;">Update</button>
                                                <div class="container-fluid" style="opacity: 0%; flex: 1 1 25%;"></div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
        <div class="col mx-auto justify-content-center align-items-center" style="flex: 1 1 70%;">
            <div class="card mb-4 mt-3 mx-3" style="border: 1px solid var(--primary-light);" data-bs-theme="dark">
                <div class="row g-0">
                    <div class="col-md-1 ms-5 align-self-center">
                        {% if user.profile_pic %}
                            <img src="{{ url_for('static', path='img/generic_pfp.png') }}" style="background-color: var(--secondary-dark); height: 5em; object-fit: contain;" class="img-fluid rounded-circle" alt="Profile Picture">
                        {% else %}
                            <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" style="background-color: var(--secondary-dark); height: 5em; object-fit: contain;" class="img-fluid rounded-circle" alt="Profile Picture">
                        {% endif %}
                    </div>
                    <div class="col-md-10 ms-3">
                        <div class="card-body">
                            <form class="d-flex me-3" role="quick post" style="display: inline;" id="quickpostform">
                                <input type="text" class="form-control search-input-text-custom me-auto align-self-center form-input-custom" id="quickpostbar" placeholder="What's on your mind today?" aria-label="Quick Post" aria-describedby="quickpostbtn" style="border: none; background-color: var(--secondary-dark); font-family: var(--primary-font-family); font-weight: var(--font-weight-light); color: var(--primary-light); font-optical-sizing: auto;">
                                <button class="btn btn-orange-custom ms-4 align-self-center" style="width: 15%;" id="quickpostbtn" type="submit"><i class="bi bi-send-fill"></i>&nbsp;&nbsp;Post</button>
                            </form>
                            <div class="container-fluid px-0 mx-0">
                                <a class="btn btn-sm badge-custom mx-1 px-2 mt-3 mb-1"><i class="bi bi-emoji-laughing"></i>&nbsp;&nbsp;&nbsp;Emojis</a>
                                <a class="btn btn-sm badge-custom mx-1 px-2 mt-3 mb-1"><i class="bi bi-images"></i>&nbsp;&nbsp;&nbsp;Attach Image(s)</a>
                                <a class="btn btn-sm badge-custom mx-1 px-2 mt-3 mb-1"><img src="{{ url_for('static', path='img/gif_icon_light.svg') }}" height="19" width="19"></i>&nbsp;&nbsp;&nbsp;Attach GIF(s)</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <ul class="nav nav-pills nav-justified mx-3 mb-1">
                {% if tab == 'posts' %}
                    <li class="nav-item mx-1">
                        <a class="nav-link rounded-pill tab-custom active" aria-current="page" href="#"><i class="bi bi-card-image"></i>&nbsp;&nbsp;My Posts</a>
                    </li>
                {% else %}
                    <li class="nav-item mx-1">
                        <a class="nav-link rounded-pill tab-custom" aria-current="page" href="{{ url_for('get_profile', username=username, tab='posts') }}"><i class="bi bi-card-image"></i>&nbsp;&nbsp;My Posts</a>
                    </li>
                {% endif %}
                {% if tab == 'diaries' %}
                    <li class="nav-item mx-1">
                        <a class="nav-link rounded-pill tab-custom active" href="#"><i class="bi bi-book-fill"></i>&nbsp;&nbsp;My Diaries</a>
                    </li>
                {% else %}
                    <li class="nav-item mx-1">
                        <a class="nav-link rounded-pill tab-custom" href="{{ url_for('get_profile', username=username, tab='diaries') }}"><i class="bi bi-book-fill"></i>&nbsp;&nbsp;My Diaries</a>
                    </li>
                {% endif %}
                {% if tab == 'tipstricks' %}
                    <li class="nav-item mx-1">
                        <a class="nav-link rounded-pill tab-custom active" href="#"><i class="bi bi-lightbulb-fill"></i>&nbsp;&nbsp;My Tips & Tricks</a>
                    </li>
                {% else %}
                    <li class="nav-item mx-1">
                        <a class="nav-link rounded-pill tab-custom" href="{{ url_for('get_profile', username=username, tab='tipstricks') }}"><i class="bi bi-lightbulb-fill"></i>&nbsp;&nbsp;My Tips & Tricks</a>
                    </li>
                {% endif %}
                {% if tab == 'progress' %}
                    <li class="nav-item mx-1">
                        <a class="nav-link rounded-pill tab-custom active" href="#"><i class="bi bi-graph-up-arrow"></i>&nbsp;&nbsp;My Progress</a>
                    </li>
                {% else %}
                    <li class="nav-item mx-1">
                        <a class="nav-link rounded-pill tab-custom" href="{{ url_for('get_profile', username=username, tab='progress') }}"><i class="bi bi-graph-up-arrow"></i>&nbsp;&nbsp;My Progress</a>
                    </li>
                {% endif %}
            </ul>
            <hr class="mb-3 mx-3 mt-0" style="border: 2px solid; border-color: var(--primary-light);">
            {% if tab == 'posts' %}
                {% if not user.posts %}
                    <div class="card mb-2 mx-3 card-post-custom" data-bs-theme="dark">
                        <div class="card-body">
                            <p class="card-text text-body-secondary text-center" style="font-family: var(--secondary-font-family); font-weight: var(--font-weight-semi-bold);">No posts yet</p>
                        </div>
                    </div>
                {% else %}
                {% for post in user.posts %}
                    {% if post.user == username %} <!-- !!!!!!!!!! Change to user.username !!!!!!!!!!! -->

                        <!-- <a href="#" style="text-decoration: none;"> -->
                        <div class="card mb-2 mx-3 card-post-custom" data-bs-theme="dark">
                            <div class="row g-0">
                                <div class="col-md-12" style="display: flex; flex-direction: column;">
                                    <div class="card-header px-4" style="flex: 1 1 30;">
                                        <div class="dropdown" data-bs-theme="dark" style="position: absolute; top: 10px; right: 10px;">
                                            <button type="button" class="btn btn-sm btn-three-dots-custom rounded me-1 align-self-center dropdown" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-three-dots"></i></button>
                                            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-secondary mt-2">
                                                <li><a class="dropdown-item dropdown-item-secondary" href="#"><i class="bi bi-bookmark"></i>&nbsp;&nbsp;Save</a></li>
                                                <li><hr class="dropdown-divider dropdown-divider-secondary"></li>
                                                <li><a class="dropdown-item dropdown-item-secondary" href="#"><i class="bi bi-eye-slash"></i>&nbsp;&nbsp;Hide</a></li>
                                                <li><hr class="dropdown-divider dropdown-divider-secondary"></li>
                                                <li><a class="dropdown-item dropdown-item-secondary" href="#"><i class="bi bi-flag"></i>&nbsp;&nbsp;Report</a></li>
                                            </ul>
                                        </div>
                                        <div class="container-fluid px-0"  style="display: inline; width: 100%;">
                                            <a href="{{ url_for('get_profile', username=username, tab='posts') }}" class="nav-link hlink-text-custom" style="display: inline;">
                                                {% if post.user %}
                                                    <img src="{{ url_for('static', path='img/generic_pfp.png') }}" height="20" width ="20" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Profile Picture">
                                                {% else %}
                                                    <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" height="20" width ="20" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Profile Picture">
                                                {% endif %}
                                                {% if post.user|length > 30 %}
                                                    <p style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-size: small; font-optical-sizing: auto;">{{ post.user[0:30] }}...</p>
                                                {% else %}
                                                    <p style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-size: small; font-optical-sizing: auto;">{{ post.user }}</p>
                                                {% endif %}
                                            </a>
                                            &nbsp;&nbsp;<i class="bi bi-circle-fill" style="font-size: 0.25rem; vertical-align: 50%;"></i>&nbsp;&nbsp;
                                            <a href="#" class="nav-link hlink-text-custom" style="display: inline;">
                                                {% if post.community.img %}
                                                    <img src="{{ url_for('static', path=post.community.img) }}" height="20" width ="20" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Community Image">
                                                {% else %}
                                                    <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" height="20" width ="20" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Community Image">
                                                {% endif %}
                                                {% if post.community.name|length > 30 %}
                                                    <p style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-size: small; font-optical-sizing: auto;">{{ post.community.name[0:30] }}...</p>
                                                {% else %}
                                                    <p style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-size: small; font-optical-sizing: auto;">{{ post.community.name }}</p>
                                                {% endif %}
                                            </a>
                                            &nbsp;&nbsp;<i class="bi bi-circle-fill" style="font-size: 0.25rem; vertical-align: 50%;"></i>&nbsp;&nbsp;
                                            <div class="container-fluid px-0" style="display: inline;">
                                                {% if post.posted_at|length > 30 %}
                                                    <p class="card-text" style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); color: var(--secondary-light); font-size: small; font-optical-sizing: auto;">{{ post.posted_at[0:30] }}...</p>
                                                {% else %}
                                                    <p class="card-text" style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); color: var(--secondary-light); font-size: small; font-optical-sizing: auto;">{{ post.posted_at }}</p>
                                                {% endif %}
                                            </div>              
                                        </div>
                                        {% if post.title|length > 50 %}
                                            <a class="nav-link mt-3 mb-2" href="{{ url_for('get_discussionthread', id=post.id) }}"><h4 class="card-title card-post-title-custom">{{ post.title[0:50] }}...</h4></a>
                                        {% else %}
                                            <a class="nav-link mt-3 mb-2" href="{{ url_for('get_discussionthread', id=post.id) }}"><h4 class="card-title card-post-title-custom">{{ post.title }}</h4></a>
                                        {% endif %}
                                        <div class="container-fluid px-0" style="display: inline; width: 100%;">
                                            {% for tag in post.tags %}
                                                <a class="btn btn-sm badge badge-custom me-1 mb-2">{{ tag }}</a>
                                            {% endfor %}
                                        </div>
                                    </div>
                                    <div class="card-body px-0 pt-0" style="flex: 1 1 50;">
                                        <div class="col-md-12 px-0 mb-3 mx-0 container-fluid" style="height: 20em; overflow: hidden;">
                                            <button type="button" class="btn btn-sm btn-interaction-custom rounded me-1 align-self-center" style="position: absolute; top: 140px; right: 10px;"><i class="bi bi-heart-fill"></i></button>
                                            {% if post.imgs %}
                                                <img src="{{ url_for('static', path=post.imgs[0]) }}" class="img-fluid" alt="Post Image">
                                            {% else %}
                                                <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" class="img-fluid" alt="Post Image">
                                            {% endif %}
                                        </div>
                                        <div class="container-fluid px-4" style="width: 100%;">
                                            {% if post.desc|length > 60 %}
                                                <p class="card-text card-post-desc-custom mb-3">{{ post.desc[0:60] }}...</p>
                                            {% else %}
                                                <p class="card-text card-post-desc-custom mb-3">{{ post.desc }}</p>
                                            {% endif %}
                                        </div>
                                        <div class="container-fluid px-4"  style="width: 100%;">
                                            <button type="button" class="btn btn-sm btn-upvote-custom rounded-pill me-2 align-self-center" style="display: inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-optical-sizing: auto;">
                                                <i class="bi bi-hand-thumbs-up-fill"></i>&nbsp;&nbsp;{{ post.likes }}
                                            </button>
                                            <button type="button" class="btn btn-sm btn-downvote-custom rounded-pill me-2 align-self-center" style="display: inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-optical-sizing: auto;">
                                                <i class="bi bi-hand-thumbs-down-fill"></i>&nbsp;&nbsp;{{ post.dislikes }}
                                            </button>
                                            <button type="button" class="btn btn-sm btn-comment-custom rounded-pill me-2 align-self-center" style="display: inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-optical-sizing: auto;">
                                                <i class="bi bi-chat-square-fill"></i>&nbsp;&nbsp;{{ post.comments|length }}
                                            </button>
                                            <button type="button" class="btn btn-sm btn-share-custom rounded-pill me-2 align-self-center" style="display: inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-optical-sizing: auto;">
                                                <i class="bi bi-share-fill"></i>&nbsp;&nbsp;Share
                                            </button>              
                                        </div>
                                    </div>
                                    <!-- <a class="btn btn-sm btn-interaction-custom ms-5 me-1 text-light align-self-center" style="flex: 1 1 10;" href="#"><i class="bi bi-heart-fill"></i></a> -->
                                    <!-- <button type="button" class="btn btn-sm btn-interaction-custom rounded me-1 align-self-center" style="flex: 1 1 10;"><i class="bi bi-heart-fill"></i></button> -->
                                </div>
                            </div>
                        </div>
                        <!-- </a> -->
                        {% if not loop.last %}
                            <hr class="mx-3 mt-2 mb-2" style="border: 1px solid var(--secondary-light);">
                        {% endif %}
                    {% endif %}
                {% endfor %}
                {% endif %}
            {% endif %}

            {% if tab == 'diaries' %}
                {% if not user.posts %}
                    <div class="card mb-2 mx-3 card-post-custom" data-bs-theme="dark">
                        <div class="card-body">
                            <p class="card-text text-body-secondary text-center" style="font-family: var(--secondary-font-family); font-weight: var(--font-weight-semi-bold);">No Diaries yet</p>
                        </div>
                    </div>
                {% else %}
                {% for diary in user.posts %}
                    {% if diary.user == username %} <!-- !!!!!!!!!! Change to user.username !!!!!!!!!!! -->

                        <!-- <a href="#" style="text-decoration: none;"> -->
                        <div class="card mb-2 mx-3 card-diary-custom">
                            <div class="row g-0">
                                <div class="col-md-12" style="display: flex; flex-direction: row;">
                                    <!-- <div class="dropdown" data-bs-theme="dark" style="position: absolute; top: 10px; right: 10px;">
                                        <button type="button" class="btn btn-sm btn-three-dots-custom rounded me-1 align-self-center dropdown" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-three-dots"></i></button>
                                        <ul class="dropdown-menu dropdown-menu-end dropdown-menu-secondary mt-2">
                                            <li><a class="dropdown-item dropdown-item-secondary" href="#"><i class="bi bi-bookmark"></i>&nbsp;&nbsp;Save</a></li>
                                            <li><hr class="dropdown-divider dropdown-divider-secondary"></li>
                                            <li><a class="dropdown-item dropdown-item-secondary" href="#"><i class="bi bi-eye-slash"></i>&nbsp;&nbsp;Hide</a></li>
                                            <li><hr class="dropdown-divider dropdown-divider-secondary"></li>
                                            <li><a class="dropdown-item dropdown-item-secondary" href="#"><i class="bi bi-flag"></i>&nbsp;&nbsp;Report</a></li>
                                        </ul>
                                    </div> -->
                                    <div class="container-fluid" style="position: absolute; top: 10px; left: 50px; width: max-content;">
                                        <div class="container-fluid px-0"  style="display: inline; width: 100%;">
                                            <a href="{{ url_for('get_profile', username=username, tab='posts') }}" class="nav-link hlink-text-diary-custom" style="display: inline;">
                                                {% if diary.user %}
                                                    <img src="{{ url_for('static', path='img/generic_pfp.png') }}" height="28" width ="28" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Profile Picture">
                                                {% else %}
                                                    <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" height="28" width ="28" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Profile Picture">
                                                {% endif %}
                                                {% if diary.user|length > 30 %}
                                                    <p style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-size: medium; font-optical-sizing: auto;">{{ diary.user[0:30] }}...</p>
                                                {% else %}    
                                                    <p style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-size: medium; font-optical-sizing: auto;">{{ diary.user }}</p>
                                                {% endif %}
                                            </a>
                                            &nbsp;&nbsp;<i class="bi bi-circle-fill" style="font-size: 0.4rem; vertical-align: 30%;"></i>&nbsp;&nbsp;
                                            <a href="#" class="nav-link hlink-text-diary-custom" style="display: inline;">
                                                {% if diary.community.img %}
                                                    <img src="{{ url_for('static', path=diary.community.img) }}" height="28" width ="28" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Community Image">
                                                {% else %}
                                                    <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" height="28" width ="28" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Community Image">
                                                {% endif %}
                                                {% if diary.community.name|length > 30 %}
                                                    <p style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-size: medium; font-optical-sizing: auto;">{{ diary.community.name[0:30] }}...</p>
                                                {% else %}
                                                    <p style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-size: medium; font-optical-sizing: auto;">{{ diary.community.name }}</p>
                                                {% endif %}
                                            </a>
                                            <!-- &nbsp;&nbsp;<i class="bi bi-circle-fill" style="font-size: 0.4rem; vertical-align: 30%;"></i>&nbsp;&nbsp;
                                            <div class="container-fluid px-0" style="display: inline;">
                                                {% if diary.posted_at|length > 30 %}
                                                    <p class="card-text" style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); color: var(--primary-light); font-size: medium; font-optical-sizing: auto;">{{ diary.posted_at[0:30] }}...</p>
                                                {% else %}
                                                    <p class="card-text" style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); color: var(--primary-light); font-size: medium; font-optical-sizing: auto;">{{ diary.posted_at }}</p>
                                                {% endif %}
                                            </div> -->
                                        </div>
                                    </div>
                                    <div class="card-body ms-5 px-0 pt-0 pb-0" style="flex: 1 1 40%; border-left: 4px solid var(--primary-dark); border-right: 4px solid var(--primary-dark);">
                                        <div class="col-md-12 px-0 mx-0 container-fluid" style="height: 30em; overflow: hidden;">
                                            {% if diary.imgs %}
                                                <img src="{{ url_for('static', path=diary.imgs[0]) }}" class="img-fluid h-100" alt="Diary Image">
                                            {% else %}
                                                <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" class="img-fluid h-100" alt="Diary Image">
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="card-header px-4" style="flex: 1 1 60%;">
                                        {% if diary.title|length > 20 %}
                                            <a class="nav-link mt-5 mb-2" href="{{ url_for('get_discussionthread', id=diary.id) }}"><h3 class="card-title card-diary-title-custom" style="font-size: 6em;">{{ diary.title[0:20] }}...</h3></a>
                                        {% else %}
                                            <a class="nav-link mt-5 mb-2" href="{{ url_for('get_discussionthread', id=diary.id) }}"><h3 class="card-title card-diary-title-custom" style="font-size: 6em;">{{ diary.title }}</h3></a>
                                        {% endif %}
                                        <!-- <div class="container-fluid px-0" style="display: inline; width: 100%;">
                                            {% for tag in diary.tags %}
                                                <a class="btn btn-sm badge badge-custom me-1 mb-2">{{ tag }}</a>
                                            {% endfor %}
                                        </div> -->
                                        <div class="container-fluid pe-3" style="width: 100%; margin-bottom: 10em;">
                                            {% if diary.desc|length > 30 %}
                                                <p class="card-text card-diary-desc-custom mb-3" style="font-size: 3em;">{{ diary.desc[0:30] }}...</p>
                                            {% else %}
                                                <p class="card-text card-diary-desc-custom mb-3" style="font-size: 3em;">{{ diary.desc }}</p>
                                            {% endif %}
                                        </div>
                                        <div class="container-fluid pe-3" style="width: 100%;">
                                            <p class="card-text card-diary-desc-custom mb-1" style="font-size: 2em;">{{ diary.posted_at }}...</p>
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-sm btn-interaction-diary-custom rounded-circle me-1 align-self-center" style="position: absolute; top: 10px; right: 10px;"><i class="bi bi-heart-fill"></i></button>
                                    <div class="container-fluid px-0"  style="display: flex; flex-direction: column; gap: 0.75rem; position: absolute; bottom: 10px; right: 10px; width: max-content;">
                                        <button type="button" class="btn btn-sm btn-upvote-diary-custom rounded-circle align-self-center" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-optical-sizing: auto; ">
                                            <i class="bi bi-hand-thumbs-up-fill"></i>
                                        </button>
                                        <button type="button" class="btn btn-sm btn-downvote-diary-custom rounded-circle align-self-center" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-optical-sizing: auto;">
                                            <i class="bi bi-hand-thumbs-down-fill"></i>
                                        </button>
                                        <button type="button" class="btn btn-sm btn-comment-diary-custom rounded-circle align-self-center" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-optical-sizing: auto; ">
                                            <i class="bi bi-chat-square-fill"></i>
                                        </button>
                                        <button type="button" class="btn btn-sm btn-share-diary-custom rounded-circle align-self-center" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-optical-sizing: auto;">
                                            <i class="bi bi-share-fill"></i>
                                        </button>              
                                    </div>
                                    <!-- <a class="btn btn-sm btn-interaction-custom ms-5 me-1 text-light align-self-center" style="flex: 1 1 10;" href="#"><i class="bi bi-heart-fill"></i></a> -->
                                    <!-- <button type="button" class="btn btn-sm btn-interaction-custom rounded me-1 align-self-center" style="flex: 1 1 10;"><i class="bi bi-heart-fill"></i></button> -->
                                </div>
                            </div>
                        </div>
                        <!-- </a> -->
                        {% if not loop.last %}
                            <hr class="mx-3 mt-2 mb-2" style="border: 1px solid var(--secondary-light);">
                        {% endif %}
                    {% endif %}
                {% endfor %}
                {% endif %}
            {% endif %}
            {% if tab == 'tipstricks' %}
                {% if not user.tipstricks %}
                    <div class="card mb-2 mx-3 card-post-custom" data-bs-theme="dark">
                        <div class="card-body">
                            <p class="card-text text-body-secondary text-center" style="font-family: var(--secondary-font-family); font-weight: var(--font-weight-semi-bold);">No Tips & Tricks yet</p>
                        </div>
                    </div>
                {% else %}
                {% for tipstricksbatch in user.tipstricks2 %}
                    <div class="container-fluid" style="display: inline-flex;">
                        {% for tipstricks in tipstricksbatch %}
                            <div class="card mb-2 mx-3 card-tipstricks-custom" data-bs-toggle="modal" data-bs-target="#tipstricksmodal{{ tipstricks.id }}" style="width: 20em; height: 25em;">
                                
                                <!-- <div class="dropdown" data-bs-theme="dark" style="position: absolute; top: 50px; right: 10px;">
                                    <button type="button" class="btn btn-sm btn-three-dots-custom rounded me-1 align-self-center dropdown" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-three-dots"></i></button>
                                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-secondary mt-2">
                                        <li><a class="dropdown-item dropdown-item-secondary" href="#"><i class="bi bi-bookmark"></i>&nbsp;&nbsp;Save</a></li>
                                        <li><hr class="dropdown-divider dropdown-divider-secondary"></li>
                                        <li><a class="dropdown-item dropdown-item-secondary" href="#"><i class="bi bi-eye-slash"></i>&nbsp;&nbsp;Hide</a></li>
                                        <li><hr class="dropdown-divider dropdown-divider-secondary"></li>
                                        <li><a class="dropdown-item dropdown-item-secondary" href="#"><i class="bi bi-flag"></i>&nbsp;&nbsp;Report</a></li>
                                    </ul>
                                </div> -->
                                <button type="button" class="btn btn-sm btn-interaction-custom rounded me-1 align-self-center" style="position: absolute; top: 10px; left: 10px;"><i class="bi bi-heart-fill"></i></button>
                                <div class="col-md" style="display: flex; flex-direction: column;">
                                    <div class="container-fluid" style="flex: 1 1 21%;"></div>
                                    <div class="card-body pt-0 pb-0 px-0" style="display: flex; flex-direction: row-reverse; flex: 1 1 79%;">
                                        <div class="container-fluid h-100 px-0" style="width: 2em; flex: 1 1 70%; overflow: hidden;">
                                            {% if tipstricks.imgs %}
                                                <img src="{{ url_for('static', path=tipstricks.imgs[0]) }}" class="img-fluid h-100 w-100" alt="TipsTricks Image" style="max-width: 100%; max-height: 100%; object-fit: cover;">
                                            {% else %}
                                                <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" class="img-fluid h-100 w-100" alt="TipsTricks Image" style="max-width: 100%; max-height: 100%; object-fit: cover;">
                                            {% endif %}
                                        </div>
                                        <div class="container-fluid px-2 align-content-center" style="width: 6em; height: 4em; position: absolute; top: 40px; right: 0px; background-color: #AA9B66;">
                                            <p class="card-title card-tipstricks-desc-custom text-center mb-0" style="color: var(--primary-light); font-size: small;">Travel Edition</p>
                                        </div>
                                        <!-- <div class="container-fluid px-0"  style="width: 100%;">
                                            <a href="{{ url_for('get_profile', username=tipstricks.user, tab='posts') }}" class="nav-link hlink-text-custom" style="display: inline;">
                                                {% if tipstricks.user %}
                                                    <img src="{{ url_for('static', path='img/generic_pfp.png') }}" height="12" width ="12" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Profile Picture">
                                                {% else %}
                                                    <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" height="12" width ="12" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Profile Picture">
                                                {% endif %}
                                                <p style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-size: x-small; font-optical-sizing: auto;">{{ tipstricks.user }}</p>
                                            </a>
                                            <i class="bi bi-circle-fill" style="font-size: 0.15rem; vertical-align: 50%;"></i>
                                            <a href="#" class="nav-link hlink-text-custom" style="display: inline;">
                                                {% if tipstricks.community.img %}
                                                    <img src="{{ url_for('static', path=tipstricks.community.img) }}" height="12" width ="12" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Community Image">
                                                {% else %}
                                                    <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" height="12" width ="12" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Community Image">
                                                {% endif %}
                                                <p style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-size: x-small; font-optical-sizing: auto;">{{ tipstricks.community.name }}</p>
                                            </a>
                                            <i class="bi bi-circle-fill" style="font-size: 0.15rem; vertical-align: 50%;"></i>
                                            <div class="container-fluid px-0" style="display: inline;">
                                                <p class="card-text" style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); color: var(--secondary-light); font-size: x-small; font-optical-sizing: auto;">{{ tipstricks.posted_at }}</p>
                                            </div>              
                                        </div> -->
                                        
                                        <div class="container-fluid px-2" style="display: flex; flex-direction: column; width: 100%; flex: 1 1 30%;">
                                            <div class="container-fluid" style="flex: 1 1 80%;">
                                                <a class="nav-link mt-2 mb-2 h-100" href="#">
                                                    {% if tipstricks.title|length > 20 %}
                                                        <h5 class="card-title card-tipstricks-title-custom" style="rotate: -90deg; font-size: x-large;">{{ tipstricks.title[0:20] }}...</h5>
                                                    {% else %}
                                                        <h5 class="card-title card-tipstricks-title-custom" style="rotate: -90deg; font-size: x-large;">{{ tipstricks.title }}</h5>
                                                    {% endif %}
                                                </a>
                                            </div>
                                            <!-- {% for tag in tipstricks.tags[0:3] %}
                                                <a class="btn btn-sm badge badge-custom me-1 mb-2" style="font-size: xx-small;">{{ tag }}</a>
                                            {% endfor %} -->
                                            {% if tipstricks.desc|length > 20 %}
                                                <p class="card-text card-tipstricks-desc-custom mb-3 mt-1" style="font-size: small;flex: 1 1 20%;">{{ tipstricks.desc[0:20] }}...</p>
                                            {% else %}
                                                <p class="card-text card-tipstricks-desc-custom mb-3 mt-1" style="font-size: small;flex: 1 1 20%;">{{ tipstricks.desc }}</p>
                                            {% endif %}
                                        </div>
                                        <!-- <a class="btn btn-sm btn-orange-custom" href="#" style="position: absolute; right: 10px; bottom: 10px;">
                                            View&nbsp;<i class="bi bi-caret-right-fill"></i>
                                        </a> -->
                                    </div>
                                </div>
                            </div>

                            <div class="modal fade" id="tipstricksmodal{{ tipstricks.id }}" tabindex="-1" aria-labelledby="tipstricksmodallabel{{ tipstricks.id }}" aria-hidden="true">
                                <div class="modal-dialog modal-lg modal-dialog-centered">
                                    <div class="modal-content"  style="border: 2px solid var(--primary-light); background-color: var(--primary-dark);">
                                        <div class="modal-header" style="border-bottom: 2px solid var(--primary-light);">
                                            <!-- <h1 class="modal-title fs-5" id="tipstricksmodallabel{{ tipstricks.id }}" style="font-family: var(--secondary-font-family); font-weight: var(--font-weight-medium); color: var(--secondary-light);">Tips & Tricks</h1> -->
                                            <div class="container-fluid mx-0 px-0" style="width: 70%;">
                                                <div class="row g-0">
                                                    <div class="col-sm-1 align-self-center" style="width: 15%;">
                                                        {% if tipstricks.imgs %}
                                                            <img src="{{ url_for('static', path=tipstricks.imgs[0]) }}" style="background-color: var(--secondary-dark); height: 5em; object-fit: contain;" class="img-fluid rounded-circle" alt="TipsTricks Image">
                                                        {% else %}
                                                            <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" style="background-color: var(--secondary-dark); height: 5em; object-fit: contain;" class="img-fluid rounded-circle" alt="TipsTricks Image">
                                                        {% endif %}
                                                    </div>
                                                    <div class="col-sm-10 ms-2">
                                                        <div class="card-body">
                                                            <div class="container-fluid d-flex me-3 px-0" style="display: inline;">
                                                                <h5 class="modal-title card-post-title-custom text-light" style="font-size: x-large; display: inline;">{{ tipstricks.title }}</h5>
                                                            </div>
                                                            <div class="container-fluid px-0"  style="display: inline; width: 100%;">
                                                                <a href="{{ url_for('get_profile', username=username, tab='posts') }}" class="nav-link hlink-text-custom" style="display: inline;">
                                                                    {% if tipstricks.user %}
                                                                        <img src="{{ url_for('static', path='img/generic_pfp.png') }}" height="20" width ="20" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Profile Picture">
                                                                    {% else %}
                                                                        <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" height="20" width ="20" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Profile Picture">
                                                                    {% endif %}
                                                                    {% if tipstricks.user|length > 30 %}
                                                                        <p style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-size: small; font-optical-sizing: auto;">{{ tipstricks.user[0:30] }}...</p>
                                                                    {% else %}
                                                                        <p style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-size: small; font-optical-sizing: auto;">{{ tipstricks.user }}</p>
                                                                    {% endif %}
                                                                </a>
                                                                &nbsp;&nbsp;<i class="bi bi-circle-fill text-light" style="font-size: 0.25rem; vertical-align: 50%;"></i>&nbsp;&nbsp;
                                                                <a href="#" class="nav-link hlink-text-custom" style="display: inline;">
                                                                    {% if tipstricks.community.img %}
                                                                        <img src="{{ url_for('static', path=tipstricks.community.img) }}" height="20" width ="20" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Community Image">
                                                                    {% else %}
                                                                        <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" height="20" width ="20" style="background-color: var(--secondary-dark)" class="rounded-circle" alt="Community Image">
                                                                    {% endif %}
                                                                    {% if tipstricks.community.name|length > 30 %}
                                                                        <p style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-size: small; font-optical-sizing: auto;">{{ tipstricks.community.name[0:30] }}...</p>
                                                                    {% else %}
                                                                        <p style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-size: small; font-optical-sizing: auto;">{{ tipstricks.community.name }}</p>
                                                                    {% endif %}
                                                                </a>
                                                                &nbsp;&nbsp;<i class="bi bi-circle-fill text-light" style="font-size: 0.25rem; vertical-align: 50%;"></i>&nbsp;&nbsp;
                                                                <div class="container-fluid px-0" style="display: inline;">
                                                                    {% if tipstricks.posted_at|length > 30 %}
                                                                        <p class="card-text" style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); color: var(--secondary-light); font-size: small; font-optical-sizing: auto;">{{ tipstricks.posted_at[0:30] }}...</p>
                                                                    {% else %}
                                                                        <p class="card-text" style="display:inline; font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); color: var(--secondary-light); font-size: small; font-optical-sizing: auto;">{{ tipstricks.posted_at }}</p>
                                                                    {% endif %}
                                                                </div>              
                                                            </div>
                                                            <div class="container-fluid px-0 mx-0">
                                                                {% for tag in tipstricks.tags[0:3] %}
                                                                    <a class="btn btn-sm badge badge-custom me-1 mb-2" style="font-size: x-small;">{{ tag }}</a>
                                                                {% endfor %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- <button type="button" class="btn-close hlink-footer-custom" data-bs-dismiss="modal" aria-label="Close"></button> -->
                                            <div class="container-fluid px-0"  style="display: flex; flex-direction: row; gap: 0.75rem; position: absolute; top: 40px; right: 10px; width: max-content;">
                                                <button type="button" class="btn btn-sm btn-upvote-diary-custom rounded-circle align-self-center" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-optical-sizing: auto; ">
                                                    <i class="bi bi-hand-thumbs-up-fill"></i>
                                                </button>
                                                <button type="button" class="btn btn-sm btn-downvote-diary-custom rounded-circle align-self-center" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-optical-sizing: auto;">
                                                    <i class="bi bi-hand-thumbs-down-fill"></i>
                                                </button>
                                                <!-- <button type="button" class="btn btn-sm btn-comment-diary-custom rounded-circle align-self-center" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-optical-sizing: auto; ">
                                                    <i class="bi bi-chat-square-fill"></i>
                                                </button> -->
                                                <button type="button" class="btn btn-sm btn-share-diary-custom rounded-circle align-self-center" style="font-family: var(--primary-font-family); font-weight: var(--font-weight-semi-bold); font-optical-sizing: auto;">
                                                    <i class="bi bi-share-fill"></i>
                                                </button>
                                                <div class="dropdown" data-bs-theme="dark">
                                                    <button type="button" class="btn btn-sm btn-three-dots-diary-custom rounded-circle me-1 align-self-center dropdown" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-three-dots"></i></button>
                                                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-secondary mt-2">
                                                        <li><a class="dropdown-item dropdown-item-secondary" href="#"><i class="bi bi-bookmark"></i>&nbsp;&nbsp;Save</a></li>
                                                        <li><hr class="dropdown-divider dropdown-divider-secondary"></li>
                                                        <li><a class="dropdown-item dropdown-item-secondary" href="#"><i class="bi bi-eye-slash"></i>&nbsp;&nbsp;Hide</a></li>
                                                        <li><hr class="dropdown-divider dropdown-divider-secondary"></li>
                                                        <li><a class="dropdown-item dropdown-item-secondary" href="#"><i class="bi bi-flag"></i>&nbsp;&nbsp;Report</a></li>
                                                        <li><hr class="dropdown-divider dropdown-divider-secondary"></li>
                                                        <li><a class="dropdown-item dropdown-item-secondary" href="#" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x-lg"></i>&nbsp;&nbsp;Close</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-body">
                                                <!-- <div class="container-fluid rounded-circle px-0 mb-0" style="width: 15%; border: 2px solid var(--primary-light);">
                                                    {% if user.profile_pic %}
                                                        <img src="{{ url_for('static', path=user.profile_pic) }}" style="background-color: var(--secondary-dark); min-height: 100%; min-width: 100%; object-fit: contain;" class="img-fluid rounded-circle" alt="Profile Picture">
                                                    {% else %}
                                                        <img src="{{ url_for('static', path='img/vclogo-white.svg') }}" style="background-color: var(--secondary-dark); min-height: 100%; min-width: 100%; object-fit: contain;" class="img-fluid rounded-circle" alt="Profile Picture">
                                                    {% endif %}
                                                </div> -->
                                                <div class="container-fluid px-0 mx-0" style="width: 100%; display: flex; flex-direction: column;">
                                                {% set tiptrickpos = namespace(value=1) %}
                                                {% for tiptrickbatch in user.tipstrickscontent %}
                                                    {% if tiptrickbatch.keys()|first == tipstricks.id %} 
                                                        <div class="container-fluid px-0 mx-0" style="width: 100%; display: flex;">
                                                            {% for tiptrickpair in tiptrickbatch.values() %}
                                                                {% for tiptrick in tiptrickpair %}
                                                                    <div class="container-fluid rounded mx-3 px-4 pt-2 pb-2 mt-4 mb-3" style="background-color: var(--extra-dark); position: relative;">
                                                                        <div class="container-fluid rounded-circle" style="width: 45px; height: 45px; background-color: #86B5E5; position: absolute; top: -20px; left: -20px;">
                                                                            <p class="text-center mb-0" style="font-size: xx-large; font-family: var(--secondary-font-family); font-weight: var(--font-weight-bold);">{{ tiptrickpos.value }}</p>
                                                                        </div>
                                                                        <p class="text-light text-center mb-0" style=" font-family: var(--secondary-font-family); font-weight: var(--font-weight-normal);">{{ tiptrick }}</p>
                                                                    </div>
                                                                    {% set tiptrickpos.value = tiptrickpos.value + 1 %}
                                                                {% endfor %}
                                                            {% endfor %}
                                                        </div>
                                                        {% if not loop.last %}
                                                            <hr class="mx-3 mt-2 mb-2" style="border: 2px dotted var(--primary-light);">
                                                        {% endif %}
                                                    {% endif %}
                                                {% endfor %}
                                                </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    {% if not loop.last %}
                        <hr class="mx-3 mt-2 mb-2" style="border: 1px solid var(--secondary-light);">
                    {% endif %}
                {% endfor %}
                {% endif %}
            {% endif %}
        </div>
    </div>
{% endblock %}